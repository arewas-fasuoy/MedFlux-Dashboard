<!DOCTYPE html>
<html lang="english">
  <head>
    <title>AddPatient - exported project</title>
    <meta property="og:title" content="AddPatient - exported project" />
    <meta id="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <meta property="twitter:card" content="summary_large_image" />

    <style data-tag="reset-style-sheet">
      html {  line-height: 1.15;}body {  margin: 0;}* {  box-sizing: border-box;  border-width: 0;  border-style: solid;}p,li,ul,pre,div,h1,h2,h3,h4,h5,h6,figure,blockquote,figcaption {  margin: 0;  padding: 0;}button {  background-color: transparent;}button,input,optgroup,select,textarea {  font-family: inherit;  font-size: 100%;  line-height: 1.15;  margin: 0;}button,select {  text-transform: none;}button,[type="button"],[type="reset"],[type="submit"] {  -webkit-appearance: button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner {  border-style: none;  padding: 0;}button:-moz-focus,[type="button"]:-moz-focus,[type="reset"]:-moz-focus,[type="submit"]:-moz-focus {  outline: 1px dotted ButtonText;}a {  color: inherit;  text-decoration: inherit;}input {  padding: 2px 4px;}img {  display: block;}html { scroll-behavior: smooth  }
    </style>
    <style data-tag="default-style-sheet">
      html {
        font-family: Inter;
        font-size: 16px;
      }

      body {
        font-weight: 400;
        font-style:normal;
        text-decoration: none;
        text-transform: none;
        letter-spacing: normal;
        line-height: 1.15;
        color: var(--dl-color-gray-black);
        background-color: var(--dl-color-gray-white);

      }
    </style>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"
      data-tag="font"
    />
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div>
      <link href="./add-patient.css" rel="stylesheet" />

      <div class="add-patient-container">
        <div class="add-patient-desktop1">
          <img
            alt="conflux1114"
            src="public/playground_assets/conflux1114-6mx-1500w.png"
            class="add-patient-conflux1"
          />
          <div class="add-patient-rectangle4">
            <input
              type="text"
              id="patient_name"
              placeholder="Enter Patient Name"
              class="add-patient-textinput input"
            />
            <input
              type="text"
              id="patient_email"
              placeholder="Enter Patient Email"
              class="add-patient-textinput01 input"
            />
            <input
              type="text"
              id="patient_contact"
              placeholder="Enter Patient Contact"
              class="add-patient-textinput02 input"
            />
            <input
              type="text"
              id="patient_location"
              placeholder="Enter Patient Contact"
              class="add-patient-textinput03 input"
            />
            <input
              type="text"
              id="patient_blood"
              placeholder="Enter Patient Blood Group"
              class="add-patient-textinput04 input"
            />
            <input
              type="text"
              id="patient_age"
              placeholder="Enter Patient Age"
              class="add-patient-textinput05 input"
            />
            <input
              type="text"
              id="patient_gender"
              placeholder="Enter Patient Gender"
              class="add-patient-textinput06 input"
            />
            <input
              type="text"
              id="patient_weight"
              placeholder="Enter Patient Weight (kg)"
              class="add-patient-textinput07 input"
            />
            <input
              type="text"
              id="patient_height"
              placeholder="Enter Patient Height (m)"
              class="add-patient-textinput08 input"
            />
            <input
              type="text"
              id="assign_patient"
              placeholder="Assign patient"
              class="add-patient-textinput09 input"
            />
            <div class="add-patient-container1">
              <div class="add-patient-container2">
                <span class="add-patient-text">Patient Name:</span>
                <span class="add-patient-text01">Email:</span>
                <span class="add-patient-text02">Contact:</span>
                <span class="add-patient-text03">Location:</span>
                <span class="add-patient-text04">
                  <span>Blood:</span>
                  <br />
                </span>
                <span class="add-patient-text07">Patient Age:</span>
                <span class="add-patient-text08">Gender:</span>
                <span class="add-patient-text09">Weight:</span>
                <span class="add-patient-text10">Heigth:</span>
                <span class="add-patient-text11">
                  <span>Assign patient</span>
                  <span>:</span>
                  <br />
                </span>
              </div>
            </div>
            <h1 class="add-patient-text15">
              <span>Add Patient</span>
              <br />
            </h1>
            <a
              href="admin.html"
              id="cancel_patient"
              class="add-patient-navlink button"
            >
              <span class="add-patient-text18">
                <span>&nbsp;&nbsp;&nbsp; Cancel &nbsp;&nbsp; &nbsp;</span>
                <br />
              </span>
            </a>
            <button id="add_patient_btn" class="add-patient-button button">
              <span class="add-patient-text21">
                <span>Add Patient</span>
                <br />
              </span>
            </button>
          </div>
          <span class="add-patient-text24"><span>MedFlux</span></span>
          <div class="add-patient-rectangle1"></div>
          <a href="home.html" class="add-patient-text26">
            <span>MedFlux</span>
          </a>
          <a
            href="https://arewasfasuoy.wordpress.com/contact/"
            target="_blank"
            rel="noreferrer noopener"
            class="add-patient-text28"
          >
            <span>Feedback</span>
          </a>
          <a
            href="https://arewasfasuoy.wordpress.com/contact/"
            target="_blank"
            rel="noreferrer noopener"
            class="add-patient-text30"
          >
            <span>Contact Me</span>
          </a>
          <a
            href="https://arewasfasuoy.wordpress.com"
            target="_blank"
            rel="noreferrer noopener"
            class="add-patient-text32"
          >
            <span>Blog</span>
          </a>
          <div class="add-patient-rectangle3"></div>
          <span class="add-patient-text34">
            <span>
              Copyright @ 2023, MedFlux Health care System - All Rights Reserved
            </span>
          </span>
        </div>
      </div>
    </div>
    <script src="https://requirejs.org/docs/release/2.3.6/minified/require.js"></script>
   <script>
      function addPatient() {
          // Get the patient values from the input fields
          var patient_name = document.getElementById("patient_name").value;
          var patient_email = document.getElementById("patient_email").value;
          var patient_age = document.getElementById("patient_age").value;
          var patient_contact = document.getElementById("patient_contact").value;

          var patient_gender = document.getElementById("patient_gender").value;
          var patient_location = document.getElementById("patient_location").value;
          var patient_weight = document.getElementById("patient_weight").value;
          var patient_height = document.getElementById("patient_height").value;
          var patient_blood = document.getElementById("patient_blood").value;
          var assign_patient = document.getElementById("assign_patient").value;
          var password = "12345";
          var id = "12332"
          console.log(patient_name);
          console.log(patient_email);
          console.log(patient_age);
          console.log(patient_contact);
          console.log(patient_gender);
          console.log(patient_location);
          console.log(patient_weight);
          console.log(patient_height);
          console.log(patient_blood);
          console.log(assign_patient);
          //
          var conn = atob("aHR0cHM6Ly9pcGZzLmlvL2lwZnMvUW1jRDhLdVg5cXpZcHRraVNOZWh2SFNHdUp1OFRBNEJtMUJqVXRRZldwUlRFWD9maWxlbmFtZT1wYXRpZW50X2RhdGFfaW5mby5jc3Y=");          
          var content = patient_name+","+"12345"+","+"1212"+","+patient_age+","+patient_gender+","+patient_blood+","+patient_weight+","+patient_height+","+"32.2"+","+patient_email+","+patient_contact+","+patient_location+"\n";
          const newContent = content;
          fetch('http://127.0.0.1:5000/add_patient', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },

            body: JSON.stringify({
              "username":patient_name,
                "password":password,
                "id":id,
                "Patient_Age":patient_age,
                "Patient_Sex": patient_gender,
                "Blood_Group":patient_blood,
                "Patient_Weight": patient_weight,
                "Patient_Height": patient_height,
                "Patient_BMI": "11.23",
                "Patient_Email": patient_email,
                "Patient_Contact": patient_contact,
                "Patient_Location": patient_location,
                "Prescribed_By": assign_patient
              }
            ),
          })
            .then(response => response.json())
            .then(data => {
              // Handle the response data
              console.log(data);
              document.getElementById("patient_name").value= '';
              document.getElementById("patient_email").value= '';
              document.getElementById("patient_age").value= '';
              document.getElementById("patient_contact").value= '';
              document.getElementById("patient_height").value= '';
              document.getElementById("patient_weight").value= '';
              document.getElementById("patient_location").value= '';
              document.getElementById("patient_gender").value= '';
              document.getElementById("assign_patient").value= '';
              document.getElementById("patient_blood").value= '';
              document.getElementById("assign_patient").value= '';
              alert("Patient added successfully...");
          
              window.location.href = "admin.html?id=";
            })
            .catch(error => {
              // Handle any errors
              console.error('Error:', error);
            });


          // const csvWriter = require(['csv-writer']).createObjectCsvStringifier;
          // const existingFileURL = conn;
          // var csvWriter = require(['csv-write-stream'])
          // var fs = require(['fs'])

          // var writer = csvWriter();
          
          

          // // writer = csvWriter({sendHeaders: false});
          // writer.pipe(fs.createWriteStream(existingFileURL, {flags: 'a'}));
          // writer.write({
          //   username:username,
          //   password:password,
          //   id:id,
          //   age:age,
          //   location:location,
          //   email:email,
          //   qualification:qualification,
          //   specilization:specilization,
          //   content:contact,
          //   hospital:hospital
          // });
          // writer.end();
      }
    document.getElementById("add_patient_btn").addEventListener("click", async function() {
      addPatient();
  });
    </script>
  </body>
</html>
